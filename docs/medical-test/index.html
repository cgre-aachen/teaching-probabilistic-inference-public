<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Test Calculator - Interactive Bayesian Inference</title>
    <link rel="stylesheet" href="../styles.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body class="demo-container">
    <header class="demo-header">
        <h1>ü©∫ Medical Test Calculator</h1>
        <p>Explore Bayes' Theorem and the Base Rate Fallacy</p>
        <a href="../index.html" class="back-button">‚Üê Back to Main</a>
    </header>

    <div class="demo-content">
        <div class="controls">
            <h3>Test Parameters</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                
                <div class="control-group">
                    <label for="prevalence">Disease Prevalence (Base Rate): <span id="prevalence-value">1.0%</span></label>
                    <input type="range" id="prevalence" min="0.1" max="50" value="1.0" step="0.1">
                </div>

                <div class="control-group">
                    <label for="sensitivity">Sensitivity (True Positive Rate): <span id="sensitivity-value">95.0%</span></label>
                    <input type="range" id="sensitivity" min="50" max="100" value="95" step="1">
                </div>

                <div class="control-group">
                    <label for="specificity">Specificity (True Negative Rate): <span id="specificity-value">95.0%</span></label>
                    <input type="range" id="specificity" min="50" max="100" value="95" step="1">
                </div>
            </div>

            <div class="result-summary" style="margin-top: 1.5rem; padding: 1rem; background: #e6fffa; border-radius: 8px; border-left: 4px solid #38b2ac;">
                <h4>Result: If you test positive, probability of having the disease is <span id="result-probability" style="font-size: 1.2em; color: #2d3748;">16.1%</span></h4>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
            
            <div class="visualization">
                <h3>Population Breakdown (per 10,000 people)</h3>
                <div id="population-chart"></div>
                <div id="population-legend" style="margin-top: 1rem; font-size: 0.9rem;"></div>
            </div>

            <div class="visualization">
                <h3>Probability Comparison</h3>
                <div id="probability-chart"></div>
            </div>
        </div>

        <div class="visualization">
            <h3>Bayes' Rectangle Diagram</h3>
            <div id="rectangle-diagram"></div>
            <div style="margin-top: 1rem; font-size: 0.9rem; color: #666;">
                <p><strong>Blue:</strong> True Positives | <strong>Red:</strong> False Positives | 
                <strong>Orange:</strong> False Negatives | <strong>Green:</strong> True Negatives</p>
            </div>
        </div>

        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin-top: 2rem;">
            <h3>Key Insights</h3>
            <div id="insights"></div>
        </div>
    </div>

    <script src="medical-test.js"></script>
</body>
</html>